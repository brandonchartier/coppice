{"version":3,"file":"coppice.js","sources":["../node_modules/virtual-dom/vnode/is-vhook.js","../node_modules/virtual-dom/vdom/apply-properties.js","../node_modules/virtual-dom/vnode/is-vnode.js","../node_modules/virtual-dom/vnode/is-vtext.js","../node_modules/virtual-dom/vnode/is-widget.js","../node_modules/virtual-dom/vnode/is-thunk.js","../node_modules/virtual-dom/vnode/handle-thunk.js","../node_modules/virtual-dom/vdom/create-element.js","../node_modules/x-is-array/index.js","../node_modules/virtual-dom/vnode/vpatch.js","../node_modules/virtual-dom/vtree/diff-props.js","../node_modules/virtual-dom/vtree/diff.js","../node_modules/virtual-dom/vnode/vnode.js","../node_modules/virtual-dom/vnode/vtext.js","../node_modules/virtual-dom/virtual-hyperscript/parse-tag.js","../node_modules/virtual-dom/virtual-hyperscript/hooks/soft-set-hook.js","../node_modules/individual/index.js","../node_modules/individual/one-version.js","../node_modules/ev-store/index.js","../node_modules/virtual-dom/virtual-hyperscript/hooks/ev-hook.js","../node_modules/virtual-dom/virtual-hyperscript/index.js","../node_modules/virtual-dom/vdom/dom-index.js","../node_modules/virtual-dom/vdom/update-widget.js","../node_modules/virtual-dom/vdom/patch-op.js","../node_modules/virtual-dom/vdom/patch.js","../node_modules/global/document.js","../node_modules/is-object/index.js","../node_modules/virtual-dom/vnode/version.js","../node_modules/virtual-dom/create-element.js","../node_modules/browser-split/index.js","../src/index.js"],"sourcesContent":["module.exports = isHook\n\nfunction isHook(hook) {\n    return hook &&\n      (typeof hook.hook === \"function\" && !hook.hasOwnProperty(\"hook\") ||\n       typeof hook.unhook === \"function\" && !hook.hasOwnProperty(\"unhook\"))\n}\n","var isObject = require(\"is-object\")\nvar isHook = require(\"../vnode/is-vhook.js\")\n\nmodule.exports = applyProperties\n\nfunction applyProperties(node, props, previous) {\n    for (var propName in props) {\n        var propValue = props[propName]\n\n        if (propValue === undefined) {\n            removeProperty(node, propName, propValue, previous);\n        } else if (isHook(propValue)) {\n            removeProperty(node, propName, propValue, previous)\n            if (propValue.hook) {\n                propValue.hook(node,\n                    propName,\n                    previous ? previous[propName] : undefined)\n            }\n        } else {\n            if (isObject(propValue)) {\n                patchObject(node, props, previous, propName, propValue);\n            } else {\n                node[propName] = propValue\n            }\n        }\n    }\n}\n\nfunction removeProperty(node, propName, propValue, previous) {\n    if (previous) {\n        var previousValue = previous[propName]\n\n        if (!isHook(previousValue)) {\n            if (propName === \"attributes\") {\n                for (var attrName in previousValue) {\n                    node.removeAttribute(attrName)\n                }\n            } else if (propName === \"style\") {\n                for (var i in previousValue) {\n                    node.style[i] = \"\"\n                }\n            } else if (typeof previousValue === \"string\") {\n                node[propName] = \"\"\n            } else {\n                node[propName] = null\n            }\n        } else if (previousValue.unhook) {\n            previousValue.unhook(node, propName, propValue)\n        }\n    }\n}\n\nfunction patchObject(node, props, previous, propName, propValue) {\n    var previousValue = previous ? previous[propName] : undefined\n\n    // Set attributes\n    if (propName === \"attributes\") {\n        for (var attrName in propValue) {\n            var attrValue = propValue[attrName]\n\n            if (attrValue === undefined) {\n                node.removeAttribute(attrName)\n            } else {\n                node.setAttribute(attrName, attrValue)\n            }\n        }\n\n        return\n    }\n\n    if(previousValue && isObject(previousValue) &&\n        getPrototype(previousValue) !== getPrototype(propValue)) {\n        node[propName] = propValue\n        return\n    }\n\n    if (!isObject(node[propName])) {\n        node[propName] = {}\n    }\n\n    var replacer = propName === \"style\" ? \"\" : undefined\n\n    for (var k in propValue) {\n        var value = propValue[k]\n        node[propName][k] = (value === undefined) ? replacer : value\n    }\n}\n\nfunction getPrototype(value) {\n    if (Object.getPrototypeOf) {\n        return Object.getPrototypeOf(value)\n    } else if (value.__proto__) {\n        return value.__proto__\n    } else if (value.constructor) {\n        return value.constructor.prototype\n    }\n}\n","var version = require(\"./version\")\n\nmodule.exports = isVirtualNode\n\nfunction isVirtualNode(x) {\n    return x && x.type === \"VirtualNode\" && x.version === version\n}\n","var version = require(\"./version\")\n\nmodule.exports = isVirtualText\n\nfunction isVirtualText(x) {\n    return x && x.type === \"VirtualText\" && x.version === version\n}\n","module.exports = isWidget\n\nfunction isWidget(w) {\n    return w && w.type === \"Widget\"\n}\n","module.exports = isThunk\r\n\r\nfunction isThunk(t) {\r\n    return t && t.type === \"Thunk\"\r\n}\r\n","var isVNode = require(\"./is-vnode\")\nvar isVText = require(\"./is-vtext\")\nvar isWidget = require(\"./is-widget\")\nvar isThunk = require(\"./is-thunk\")\n\nmodule.exports = handleThunk\n\nfunction handleThunk(a, b) {\n    var renderedA = a\n    var renderedB = b\n\n    if (isThunk(b)) {\n        renderedB = renderThunk(b, a)\n    }\n\n    if (isThunk(a)) {\n        renderedA = renderThunk(a, null)\n    }\n\n    return {\n        a: renderedA,\n        b: renderedB\n    }\n}\n\nfunction renderThunk(thunk, previous) {\n    var renderedThunk = thunk.vnode\n\n    if (!renderedThunk) {\n        renderedThunk = thunk.vnode = thunk.render(previous)\n    }\n\n    if (!(isVNode(renderedThunk) ||\n            isVText(renderedThunk) ||\n            isWidget(renderedThunk))) {\n        throw new Error(\"thunk did not return a valid node\");\n    }\n\n    return renderedThunk\n}\n","var document = require(\"global/document\")\n\nvar applyProperties = require(\"./apply-properties\")\n\nvar isVNode = require(\"../vnode/is-vnode.js\")\nvar isVText = require(\"../vnode/is-vtext.js\")\nvar isWidget = require(\"../vnode/is-widget.js\")\nvar handleThunk = require(\"../vnode/handle-thunk.js\")\n\nmodule.exports = createElement\n\nfunction createElement(vnode, opts) {\n    var doc = opts ? opts.document || document : document\n    var warn = opts ? opts.warn : null\n\n    vnode = handleThunk(vnode).a\n\n    if (isWidget(vnode)) {\n        return vnode.init()\n    } else if (isVText(vnode)) {\n        return doc.createTextNode(vnode.text)\n    } else if (!isVNode(vnode)) {\n        if (warn) {\n            warn(\"Item is not a valid virtual dom node\", vnode)\n        }\n        return null\n    }\n\n    var node = (vnode.namespace === null) ?\n        doc.createElement(vnode.tagName) :\n        doc.createElementNS(vnode.namespace, vnode.tagName)\n\n    var props = vnode.properties\n    applyProperties(node, props)\n\n    var children = vnode.children\n\n    for (var i = 0; i < children.length; i++) {\n        var childNode = createElement(children[i], opts)\n        if (childNode) {\n            node.appendChild(childNode)\n        }\n    }\n\n    return node\n}\n","var nativeIsArray = Array.isArray\nvar toString = Object.prototype.toString\n\nmodule.exports = nativeIsArray || isArray\n\nfunction isArray(obj) {\n    return toString.call(obj) === \"[object Array]\"\n}\n","var version = require(\"./version\")\n\nVirtualPatch.NONE = 0\nVirtualPatch.VTEXT = 1\nVirtualPatch.VNODE = 2\nVirtualPatch.WIDGET = 3\nVirtualPatch.PROPS = 4\nVirtualPatch.ORDER = 5\nVirtualPatch.INSERT = 6\nVirtualPatch.REMOVE = 7\nVirtualPatch.THUNK = 8\n\nmodule.exports = VirtualPatch\n\nfunction VirtualPatch(type, vNode, patch) {\n    this.type = Number(type)\n    this.vNode = vNode\n    this.patch = patch\n}\n\nVirtualPatch.prototype.version = version\nVirtualPatch.prototype.type = \"VirtualPatch\"\n","var isObject = require(\"is-object\")\nvar isHook = require(\"../vnode/is-vhook\")\n\nmodule.exports = diffProps\n\nfunction diffProps(a, b) {\n    var diff\n\n    for (var aKey in a) {\n        if (!(aKey in b)) {\n            diff = diff || {}\n            diff[aKey] = undefined\n        }\n\n        var aValue = a[aKey]\n        var bValue = b[aKey]\n\n        if (aValue === bValue) {\n            continue\n        } else if (isObject(aValue) && isObject(bValue)) {\n            if (getPrototype(bValue) !== getPrototype(aValue)) {\n                diff = diff || {}\n                diff[aKey] = bValue\n            } else if (isHook(bValue)) {\n                 diff = diff || {}\n                 diff[aKey] = bValue\n            } else {\n                var objectDiff = diffProps(aValue, bValue)\n                if (objectDiff) {\n                    diff = diff || {}\n                    diff[aKey] = objectDiff\n                }\n            }\n        } else {\n            diff = diff || {}\n            diff[aKey] = bValue\n        }\n    }\n\n    for (var bKey in b) {\n        if (!(bKey in a)) {\n            diff = diff || {}\n            diff[bKey] = b[bKey]\n        }\n    }\n\n    return diff\n}\n\nfunction getPrototype(value) {\n  if (Object.getPrototypeOf) {\n    return Object.getPrototypeOf(value)\n  } else if (value.__proto__) {\n    return value.__proto__\n  } else if (value.constructor) {\n    return value.constructor.prototype\n  }\n}\n","var isArray = require(\"x-is-array\")\n\nvar VPatch = require(\"../vnode/vpatch\")\nvar isVNode = require(\"../vnode/is-vnode\")\nvar isVText = require(\"../vnode/is-vtext\")\nvar isWidget = require(\"../vnode/is-widget\")\nvar isThunk = require(\"../vnode/is-thunk\")\nvar handleThunk = require(\"../vnode/handle-thunk\")\n\nvar diffProps = require(\"./diff-props\")\n\nmodule.exports = diff\n\nfunction diff(a, b) {\n    var patch = { a: a }\n    walk(a, b, patch, 0)\n    return patch\n}\n\nfunction walk(a, b, patch, index) {\n    if (a === b) {\n        return\n    }\n\n    var apply = patch[index]\n    var applyClear = false\n\n    if (isThunk(a) || isThunk(b)) {\n        thunks(a, b, patch, index)\n    } else if (b == null) {\n\n        // If a is a widget we will add a remove patch for it\n        // Otherwise any child widgets/hooks must be destroyed.\n        // This prevents adding two remove patches for a widget.\n        if (!isWidget(a)) {\n            clearState(a, patch, index)\n            apply = patch[index]\n        }\n\n        apply = appendPatch(apply, new VPatch(VPatch.REMOVE, a, b))\n    } else if (isVNode(b)) {\n        if (isVNode(a)) {\n            if (a.tagName === b.tagName &&\n                a.namespace === b.namespace &&\n                a.key === b.key) {\n                var propsPatch = diffProps(a.properties, b.properties)\n                if (propsPatch) {\n                    apply = appendPatch(apply,\n                        new VPatch(VPatch.PROPS, a, propsPatch))\n                }\n                apply = diffChildren(a, b, patch, apply, index)\n            } else {\n                apply = appendPatch(apply, new VPatch(VPatch.VNODE, a, b))\n                applyClear = true\n            }\n        } else {\n            apply = appendPatch(apply, new VPatch(VPatch.VNODE, a, b))\n            applyClear = true\n        }\n    } else if (isVText(b)) {\n        if (!isVText(a)) {\n            apply = appendPatch(apply, new VPatch(VPatch.VTEXT, a, b))\n            applyClear = true\n        } else if (a.text !== b.text) {\n            apply = appendPatch(apply, new VPatch(VPatch.VTEXT, a, b))\n        }\n    } else if (isWidget(b)) {\n        if (!isWidget(a)) {\n            applyClear = true\n        }\n\n        apply = appendPatch(apply, new VPatch(VPatch.WIDGET, a, b))\n    }\n\n    if (apply) {\n        patch[index] = apply\n    }\n\n    if (applyClear) {\n        clearState(a, patch, index)\n    }\n}\n\nfunction diffChildren(a, b, patch, apply, index) {\n    var aChildren = a.children\n    var orderedSet = reorder(aChildren, b.children)\n    var bChildren = orderedSet.children\n\n    var aLen = aChildren.length\n    var bLen = bChildren.length\n    var len = aLen > bLen ? aLen : bLen\n\n    for (var i = 0; i < len; i++) {\n        var leftNode = aChildren[i]\n        var rightNode = bChildren[i]\n        index += 1\n\n        if (!leftNode) {\n            if (rightNode) {\n                // Excess nodes in b need to be added\n                apply = appendPatch(apply,\n                    new VPatch(VPatch.INSERT, null, rightNode))\n            }\n        } else {\n            walk(leftNode, rightNode, patch, index)\n        }\n\n        if (isVNode(leftNode) && leftNode.count) {\n            index += leftNode.count\n        }\n    }\n\n    if (orderedSet.moves) {\n        // Reorder nodes last\n        apply = appendPatch(apply, new VPatch(\n            VPatch.ORDER,\n            a,\n            orderedSet.moves\n        ))\n    }\n\n    return apply\n}\n\nfunction clearState(vNode, patch, index) {\n    // TODO: Make this a single walk, not two\n    unhook(vNode, patch, index)\n    destroyWidgets(vNode, patch, index)\n}\n\n// Patch records for all destroyed widgets must be added because we need\n// a DOM node reference for the destroy function\nfunction destroyWidgets(vNode, patch, index) {\n    if (isWidget(vNode)) {\n        if (typeof vNode.destroy === \"function\") {\n            patch[index] = appendPatch(\n                patch[index],\n                new VPatch(VPatch.REMOVE, vNode, null)\n            )\n        }\n    } else if (isVNode(vNode) && (vNode.hasWidgets || vNode.hasThunks)) {\n        var children = vNode.children\n        var len = children.length\n        for (var i = 0; i < len; i++) {\n            var child = children[i]\n            index += 1\n\n            destroyWidgets(child, patch, index)\n\n            if (isVNode(child) && child.count) {\n                index += child.count\n            }\n        }\n    } else if (isThunk(vNode)) {\n        thunks(vNode, null, patch, index)\n    }\n}\n\n// Create a sub-patch for thunks\nfunction thunks(a, b, patch, index) {\n    var nodes = handleThunk(a, b)\n    var thunkPatch = diff(nodes.a, nodes.b)\n    if (hasPatches(thunkPatch)) {\n        patch[index] = new VPatch(VPatch.THUNK, null, thunkPatch)\n    }\n}\n\nfunction hasPatches(patch) {\n    for (var index in patch) {\n        if (index !== \"a\") {\n            return true\n        }\n    }\n\n    return false\n}\n\n// Execute hooks when two nodes are identical\nfunction unhook(vNode, patch, index) {\n    if (isVNode(vNode)) {\n        if (vNode.hooks) {\n            patch[index] = appendPatch(\n                patch[index],\n                new VPatch(\n                    VPatch.PROPS,\n                    vNode,\n                    undefinedKeys(vNode.hooks)\n                )\n            )\n        }\n\n        if (vNode.descendantHooks || vNode.hasThunks) {\n            var children = vNode.children\n            var len = children.length\n            for (var i = 0; i < len; i++) {\n                var child = children[i]\n                index += 1\n\n                unhook(child, patch, index)\n\n                if (isVNode(child) && child.count) {\n                    index += child.count\n                }\n            }\n        }\n    } else if (isThunk(vNode)) {\n        thunks(vNode, null, patch, index)\n    }\n}\n\nfunction undefinedKeys(obj) {\n    var result = {}\n\n    for (var key in obj) {\n        result[key] = undefined\n    }\n\n    return result\n}\n\n// List diff, naive left to right reordering\nfunction reorder(aChildren, bChildren) {\n    // O(M) time, O(M) memory\n    var bChildIndex = keyIndex(bChildren)\n    var bKeys = bChildIndex.keys\n    var bFree = bChildIndex.free\n\n    if (bFree.length === bChildren.length) {\n        return {\n            children: bChildren,\n            moves: null\n        }\n    }\n\n    // O(N) time, O(N) memory\n    var aChildIndex = keyIndex(aChildren)\n    var aKeys = aChildIndex.keys\n    var aFree = aChildIndex.free\n\n    if (aFree.length === aChildren.length) {\n        return {\n            children: bChildren,\n            moves: null\n        }\n    }\n\n    // O(MAX(N, M)) memory\n    var newChildren = []\n\n    var freeIndex = 0\n    var freeCount = bFree.length\n    var deletedItems = 0\n\n    // Iterate through a and match a node in b\n    // O(N) time,\n    for (var i = 0 ; i < aChildren.length; i++) {\n        var aItem = aChildren[i]\n        var itemIndex\n\n        if (aItem.key) {\n            if (bKeys.hasOwnProperty(aItem.key)) {\n                // Match up the old keys\n                itemIndex = bKeys[aItem.key]\n                newChildren.push(bChildren[itemIndex])\n\n            } else {\n                // Remove old keyed items\n                itemIndex = i - deletedItems++\n                newChildren.push(null)\n            }\n        } else {\n            // Match the item in a with the next free item in b\n            if (freeIndex < freeCount) {\n                itemIndex = bFree[freeIndex++]\n                newChildren.push(bChildren[itemIndex])\n            } else {\n                // There are no free items in b to match with\n                // the free items in a, so the extra free nodes\n                // are deleted.\n                itemIndex = i - deletedItems++\n                newChildren.push(null)\n            }\n        }\n    }\n\n    var lastFreeIndex = freeIndex >= bFree.length ?\n        bChildren.length :\n        bFree[freeIndex]\n\n    // Iterate through b and append any new keys\n    // O(M) time\n    for (var j = 0; j < bChildren.length; j++) {\n        var newItem = bChildren[j]\n\n        if (newItem.key) {\n            if (!aKeys.hasOwnProperty(newItem.key)) {\n                // Add any new keyed items\n                // We are adding new items to the end and then sorting them\n                // in place. In future we should insert new items in place.\n                newChildren.push(newItem)\n            }\n        } else if (j >= lastFreeIndex) {\n            // Add any leftover non-keyed items\n            newChildren.push(newItem)\n        }\n    }\n\n    var simulate = newChildren.slice()\n    var simulateIndex = 0\n    var removes = []\n    var inserts = []\n    var simulateItem\n\n    for (var k = 0; k < bChildren.length;) {\n        var wantedItem = bChildren[k]\n        simulateItem = simulate[simulateIndex]\n\n        // remove items\n        while (simulateItem === null && simulate.length) {\n            removes.push(remove(simulate, simulateIndex, null))\n            simulateItem = simulate[simulateIndex]\n        }\n\n        if (!simulateItem || simulateItem.key !== wantedItem.key) {\n            // if we need a key in this position...\n            if (wantedItem.key) {\n                if (simulateItem && simulateItem.key) {\n                    // if an insert doesn't put this key in place, it needs to move\n                    if (bKeys[simulateItem.key] !== k + 1) {\n                        removes.push(remove(simulate, simulateIndex, simulateItem.key))\n                        simulateItem = simulate[simulateIndex]\n                        // if the remove didn't put the wanted item in place, we need to insert it\n                        if (!simulateItem || simulateItem.key !== wantedItem.key) {\n                            inserts.push({key: wantedItem.key, to: k})\n                        }\n                        // items are matching, so skip ahead\n                        else {\n                            simulateIndex++\n                        }\n                    }\n                    else {\n                        inserts.push({key: wantedItem.key, to: k})\n                    }\n                }\n                else {\n                    inserts.push({key: wantedItem.key, to: k})\n                }\n                k++\n            }\n            // a key in simulate has no matching wanted key, remove it\n            else if (simulateItem && simulateItem.key) {\n                removes.push(remove(simulate, simulateIndex, simulateItem.key))\n            }\n        }\n        else {\n            simulateIndex++\n            k++\n        }\n    }\n\n    // remove all the remaining nodes from simulate\n    while(simulateIndex < simulate.length) {\n        simulateItem = simulate[simulateIndex]\n        removes.push(remove(simulate, simulateIndex, simulateItem && simulateItem.key))\n    }\n\n    // If the only moves we have are deletes then we can just\n    // let the delete patch remove these items.\n    if (removes.length === deletedItems && !inserts.length) {\n        return {\n            children: newChildren,\n            moves: null\n        }\n    }\n\n    return {\n        children: newChildren,\n        moves: {\n            removes: removes,\n            inserts: inserts\n        }\n    }\n}\n\nfunction remove(arr, index, key) {\n    arr.splice(index, 1)\n\n    return {\n        from: index,\n        key: key\n    }\n}\n\nfunction keyIndex(children) {\n    var keys = {}\n    var free = []\n    var length = children.length\n\n    for (var i = 0; i < length; i++) {\n        var child = children[i]\n\n        if (child.key) {\n            keys[child.key] = i\n        } else {\n            free.push(i)\n        }\n    }\n\n    return {\n        keys: keys,     // A hash of key name to index\n        free: free      // An array of unkeyed item indices\n    }\n}\n\nfunction appendPatch(apply, patch) {\n    if (apply) {\n        if (isArray(apply)) {\n            apply.push(patch)\n        } else {\n            apply = [apply, patch]\n        }\n\n        return apply\n    } else {\n        return patch\n    }\n}\n","var version = require(\"./version\")\nvar isVNode = require(\"./is-vnode\")\nvar isWidget = require(\"./is-widget\")\nvar isThunk = require(\"./is-thunk\")\nvar isVHook = require(\"./is-vhook\")\n\nmodule.exports = VirtualNode\n\nvar noProperties = {}\nvar noChildren = []\n\nfunction VirtualNode(tagName, properties, children, key, namespace) {\n    this.tagName = tagName\n    this.properties = properties || noProperties\n    this.children = children || noChildren\n    this.key = key != null ? String(key) : undefined\n    this.namespace = (typeof namespace === \"string\") ? namespace : null\n\n    var count = (children && children.length) || 0\n    var descendants = 0\n    var hasWidgets = false\n    var hasThunks = false\n    var descendantHooks = false\n    var hooks\n\n    for (var propName in properties) {\n        if (properties.hasOwnProperty(propName)) {\n            var property = properties[propName]\n            if (isVHook(property) && property.unhook) {\n                if (!hooks) {\n                    hooks = {}\n                }\n\n                hooks[propName] = property\n            }\n        }\n    }\n\n    for (var i = 0; i < count; i++) {\n        var child = children[i]\n        if (isVNode(child)) {\n            descendants += child.count || 0\n\n            if (!hasWidgets && child.hasWidgets) {\n                hasWidgets = true\n            }\n\n            if (!hasThunks && child.hasThunks) {\n                hasThunks = true\n            }\n\n            if (!descendantHooks && (child.hooks || child.descendantHooks)) {\n                descendantHooks = true\n            }\n        } else if (!hasWidgets && isWidget(child)) {\n            if (typeof child.destroy === \"function\") {\n                hasWidgets = true\n            }\n        } else if (!hasThunks && isThunk(child)) {\n            hasThunks = true;\n        }\n    }\n\n    this.count = count + descendants\n    this.hasWidgets = hasWidgets\n    this.hasThunks = hasThunks\n    this.hooks = hooks\n    this.descendantHooks = descendantHooks\n}\n\nVirtualNode.prototype.version = version\nVirtualNode.prototype.type = \"VirtualNode\"\n","var version = require(\"./version\")\n\nmodule.exports = VirtualText\n\nfunction VirtualText(text) {\n    this.text = String(text)\n}\n\nVirtualText.prototype.version = version\nVirtualText.prototype.type = \"VirtualText\"\n","'use strict';\n\nvar split = require('browser-split');\n\nvar classIdSplit = /([\\.#]?[a-zA-Z0-9\\u007F-\\uFFFF_:-]+)/;\nvar notClassId = /^\\.|#/;\n\nmodule.exports = parseTag;\n\nfunction parseTag(tag, props) {\n    if (!tag) {\n        return 'DIV';\n    }\n\n    var noId = !(props.hasOwnProperty('id'));\n\n    var tagParts = split(tag, classIdSplit);\n    var tagName = null;\n\n    if (notClassId.test(tagParts[1])) {\n        tagName = 'DIV';\n    }\n\n    var classes, part, type, i;\n\n    for (i = 0; i < tagParts.length; i++) {\n        part = tagParts[i];\n\n        if (!part) {\n            continue;\n        }\n\n        type = part.charAt(0);\n\n        if (!tagName) {\n            tagName = part;\n        } else if (type === '.') {\n            classes = classes || [];\n            classes.push(part.substring(1, part.length));\n        } else if (type === '#' && noId) {\n            props.id = part.substring(1, part.length);\n        }\n    }\n\n    if (classes) {\n        if (props.className) {\n            classes.push(props.className);\n        }\n\n        props.className = classes.join(' ');\n    }\n\n    return props.namespace ? tagName : tagName.toUpperCase();\n}\n","'use strict';\n\nmodule.exports = SoftSetHook;\n\nfunction SoftSetHook(value) {\n    if (!(this instanceof SoftSetHook)) {\n        return new SoftSetHook(value);\n    }\n\n    this.value = value;\n}\n\nSoftSetHook.prototype.hook = function (node, propertyName) {\n    if (node[propertyName] !== this.value) {\n        node[propertyName] = this.value;\n    }\n};\n","'use strict';\n\n/*global window, global*/\n\nvar root = typeof window !== 'undefined' ?\n    window : typeof global !== 'undefined' ?\n    global : {};\n\nmodule.exports = Individual;\n\nfunction Individual(key, value) {\n    if (key in root) {\n        return root[key];\n    }\n\n    root[key] = value;\n\n    return value;\n}\n","'use strict';\n\nvar Individual = require('./index.js');\n\nmodule.exports = OneVersion;\n\nfunction OneVersion(moduleName, version, defaultValue) {\n    var key = '__INDIVIDUAL_ONE_VERSION_' + moduleName;\n    var enforceKey = key + '_ENFORCE_SINGLETON';\n\n    var versionValue = Individual(enforceKey, version);\n\n    if (versionValue !== version) {\n        throw new Error('Can only have one copy of ' +\n            moduleName + '.\\n' +\n            'You already have version ' + versionValue +\n            ' installed.\\n' +\n            'This means you cannot install version ' + version);\n    }\n\n    return Individual(key, defaultValue);\n}\n","'use strict';\n\nvar OneVersionConstraint = require('individual/one-version');\n\nvar MY_VERSION = '7';\nOneVersionConstraint('ev-store', MY_VERSION);\n\nvar hashKey = '__EV_STORE_KEY@' + MY_VERSION;\n\nmodule.exports = EvStore;\n\nfunction EvStore(elem) {\n    var hash = elem[hashKey];\n\n    if (!hash) {\n        hash = elem[hashKey] = {};\n    }\n\n    return hash;\n}\n","'use strict';\n\nvar EvStore = require('ev-store');\n\nmodule.exports = EvHook;\n\nfunction EvHook(value) {\n    if (!(this instanceof EvHook)) {\n        return new EvHook(value);\n    }\n\n    this.value = value;\n}\n\nEvHook.prototype.hook = function (node, propertyName) {\n    var es = EvStore(node);\n    var propName = propertyName.substr(3);\n\n    es[propName] = this.value;\n};\n\nEvHook.prototype.unhook = function(node, propertyName) {\n    var es = EvStore(node);\n    var propName = propertyName.substr(3);\n\n    es[propName] = undefined;\n};\n","'use strict';\n\nvar isArray = require('x-is-array');\n\nvar VNode = require('../vnode/vnode.js');\nvar VText = require('../vnode/vtext.js');\nvar isVNode = require('../vnode/is-vnode');\nvar isVText = require('../vnode/is-vtext');\nvar isWidget = require('../vnode/is-widget');\nvar isHook = require('../vnode/is-vhook');\nvar isVThunk = require('../vnode/is-thunk');\n\nvar parseTag = require('./parse-tag.js');\nvar softSetHook = require('./hooks/soft-set-hook.js');\nvar evHook = require('./hooks/ev-hook.js');\n\nmodule.exports = h;\n\nfunction h(tagName, properties, children) {\n    var childNodes = [];\n    var tag, props, key, namespace;\n\n    if (!children && isChildren(properties)) {\n        children = properties;\n        props = {};\n    }\n\n    props = props || properties || {};\n    tag = parseTag(tagName, props);\n\n    // support keys\n    if (props.hasOwnProperty('key')) {\n        key = props.key;\n        props.key = undefined;\n    }\n\n    // support namespace\n    if (props.hasOwnProperty('namespace')) {\n        namespace = props.namespace;\n        props.namespace = undefined;\n    }\n\n    // fix cursor bug\n    if (tag === 'INPUT' &&\n        !namespace &&\n        props.hasOwnProperty('value') &&\n        props.value !== undefined &&\n        !isHook(props.value)\n    ) {\n        props.value = softSetHook(props.value);\n    }\n\n    transformProperties(props);\n\n    if (children !== undefined && children !== null) {\n        addChild(children, childNodes, tag, props);\n    }\n\n\n    return new VNode(tag, props, childNodes, key, namespace);\n}\n\nfunction addChild(c, childNodes, tag, props) {\n    if (typeof c === 'string') {\n        childNodes.push(new VText(c));\n    } else if (typeof c === 'number') {\n        childNodes.push(new VText(String(c)));\n    } else if (isChild(c)) {\n        childNodes.push(c);\n    } else if (isArray(c)) {\n        for (var i = 0; i < c.length; i++) {\n            addChild(c[i], childNodes, tag, props);\n        }\n    } else if (c === null || c === undefined) {\n        return;\n    } else {\n        throw UnexpectedVirtualElement({\n            foreignObject: c,\n            parentVnode: {\n                tagName: tag,\n                properties: props\n            }\n        });\n    }\n}\n\nfunction transformProperties(props) {\n    for (var propName in props) {\n        if (props.hasOwnProperty(propName)) {\n            var value = props[propName];\n\n            if (isHook(value)) {\n                continue;\n            }\n\n            if (propName.substr(0, 3) === 'ev-') {\n                // add ev-foo support\n                props[propName] = evHook(value);\n            }\n        }\n    }\n}\n\nfunction isChild(x) {\n    return isVNode(x) || isVText(x) || isWidget(x) || isVThunk(x);\n}\n\nfunction isChildren(x) {\n    return typeof x === 'string' || isArray(x) || isChild(x);\n}\n\nfunction UnexpectedVirtualElement(data) {\n    var err = new Error();\n\n    err.type = 'virtual-hyperscript.unexpected.virtual-element';\n    err.message = 'Unexpected virtual child passed to h().\\n' +\n        'Expected a VNode / Vthunk / VWidget / string but:\\n' +\n        'got:\\n' +\n        errorString(data.foreignObject) +\n        '.\\n' +\n        'The parent vnode is:\\n' +\n        errorString(data.parentVnode)\n        '\\n' +\n        'Suggested fix: change your `h(..., [ ... ])` callsite.';\n    err.foreignObject = data.foreignObject;\n    err.parentVnode = data.parentVnode;\n\n    return err;\n}\n\nfunction errorString(obj) {\n    try {\n        return JSON.stringify(obj, null, '    ');\n    } catch (e) {\n        return String(obj);\n    }\n}\n","// Maps a virtual DOM tree onto a real DOM tree in an efficient manner.\n// We don't want to read all of the DOM nodes in the tree so we use\n// the in-order tree indexing to eliminate recursion down certain branches.\n// We only recurse into a DOM node if we know that it contains a child of\n// interest.\n\nvar noChild = {}\n\nmodule.exports = domIndex\n\nfunction domIndex(rootNode, tree, indices, nodes) {\n    if (!indices || indices.length === 0) {\n        return {}\n    } else {\n        indices.sort(ascending)\n        return recurse(rootNode, tree, indices, nodes, 0)\n    }\n}\n\nfunction recurse(rootNode, tree, indices, nodes, rootIndex) {\n    nodes = nodes || {}\n\n\n    if (rootNode) {\n        if (indexInRange(indices, rootIndex, rootIndex)) {\n            nodes[rootIndex] = rootNode\n        }\n\n        var vChildren = tree.children\n\n        if (vChildren) {\n\n            var childNodes = rootNode.childNodes\n\n            for (var i = 0; i < tree.children.length; i++) {\n                rootIndex += 1\n\n                var vChild = vChildren[i] || noChild\n                var nextIndex = rootIndex + (vChild.count || 0)\n\n                // skip recursion down the tree if there are no nodes down here\n                if (indexInRange(indices, rootIndex, nextIndex)) {\n                    recurse(childNodes[i], vChild, indices, nodes, rootIndex)\n                }\n\n                rootIndex = nextIndex\n            }\n        }\n    }\n\n    return nodes\n}\n\n// Binary search for an index in the interval [left, right]\nfunction indexInRange(indices, left, right) {\n    if (indices.length === 0) {\n        return false\n    }\n\n    var minIndex = 0\n    var maxIndex = indices.length - 1\n    var currentIndex\n    var currentItem\n\n    while (minIndex <= maxIndex) {\n        currentIndex = ((maxIndex + minIndex) / 2) >> 0\n        currentItem = indices[currentIndex]\n\n        if (minIndex === maxIndex) {\n            return currentItem >= left && currentItem <= right\n        } else if (currentItem < left) {\n            minIndex = currentIndex + 1\n        } else  if (currentItem > right) {\n            maxIndex = currentIndex - 1\n        } else {\n            return true\n        }\n    }\n\n    return false;\n}\n\nfunction ascending(a, b) {\n    return a > b ? 1 : -1\n}\n","var isWidget = require(\"../vnode/is-widget.js\")\n\nmodule.exports = updateWidget\n\nfunction updateWidget(a, b) {\n    if (isWidget(a) && isWidget(b)) {\n        if (\"name\" in a && \"name\" in b) {\n            return a.id === b.id\n        } else {\n            return a.init === b.init\n        }\n    }\n\n    return false\n}\n","var applyProperties = require(\"./apply-properties\")\n\nvar isWidget = require(\"../vnode/is-widget.js\")\nvar VPatch = require(\"../vnode/vpatch.js\")\n\nvar updateWidget = require(\"./update-widget\")\n\nmodule.exports = applyPatch\n\nfunction applyPatch(vpatch, domNode, renderOptions) {\n    var type = vpatch.type\n    var vNode = vpatch.vNode\n    var patch = vpatch.patch\n\n    switch (type) {\n        case VPatch.REMOVE:\n            return removeNode(domNode, vNode)\n        case VPatch.INSERT:\n            return insertNode(domNode, patch, renderOptions)\n        case VPatch.VTEXT:\n            return stringPatch(domNode, vNode, patch, renderOptions)\n        case VPatch.WIDGET:\n            return widgetPatch(domNode, vNode, patch, renderOptions)\n        case VPatch.VNODE:\n            return vNodePatch(domNode, vNode, patch, renderOptions)\n        case VPatch.ORDER:\n            reorderChildren(domNode, patch)\n            return domNode\n        case VPatch.PROPS:\n            applyProperties(domNode, patch, vNode.properties)\n            return domNode\n        case VPatch.THUNK:\n            return replaceRoot(domNode,\n                renderOptions.patch(domNode, patch, renderOptions))\n        default:\n            return domNode\n    }\n}\n\nfunction removeNode(domNode, vNode) {\n    var parentNode = domNode.parentNode\n\n    if (parentNode) {\n        parentNode.removeChild(domNode)\n    }\n\n    destroyWidget(domNode, vNode);\n\n    return null\n}\n\nfunction insertNode(parentNode, vNode, renderOptions) {\n    var newNode = renderOptions.render(vNode, renderOptions)\n\n    if (parentNode) {\n        parentNode.appendChild(newNode)\n    }\n\n    return parentNode\n}\n\nfunction stringPatch(domNode, leftVNode, vText, renderOptions) {\n    var newNode\n\n    if (domNode.nodeType === 3) {\n        domNode.replaceData(0, domNode.length, vText.text)\n        newNode = domNode\n    } else {\n        var parentNode = domNode.parentNode\n        newNode = renderOptions.render(vText, renderOptions)\n\n        if (parentNode && newNode !== domNode) {\n            parentNode.replaceChild(newNode, domNode)\n        }\n    }\n\n    return newNode\n}\n\nfunction widgetPatch(domNode, leftVNode, widget, renderOptions) {\n    var updating = updateWidget(leftVNode, widget)\n    var newNode\n\n    if (updating) {\n        newNode = widget.update(leftVNode, domNode) || domNode\n    } else {\n        newNode = renderOptions.render(widget, renderOptions)\n    }\n\n    var parentNode = domNode.parentNode\n\n    if (parentNode && newNode !== domNode) {\n        parentNode.replaceChild(newNode, domNode)\n    }\n\n    if (!updating) {\n        destroyWidget(domNode, leftVNode)\n    }\n\n    return newNode\n}\n\nfunction vNodePatch(domNode, leftVNode, vNode, renderOptions) {\n    var parentNode = domNode.parentNode\n    var newNode = renderOptions.render(vNode, renderOptions)\n\n    if (parentNode && newNode !== domNode) {\n        parentNode.replaceChild(newNode, domNode)\n    }\n\n    return newNode\n}\n\nfunction destroyWidget(domNode, w) {\n    if (typeof w.destroy === \"function\" && isWidget(w)) {\n        w.destroy(domNode)\n    }\n}\n\nfunction reorderChildren(domNode, moves) {\n    var childNodes = domNode.childNodes\n    var keyMap = {}\n    var node\n    var remove\n    var insert\n\n    for (var i = 0; i < moves.removes.length; i++) {\n        remove = moves.removes[i]\n        node = childNodes[remove.from]\n        if (remove.key) {\n            keyMap[remove.key] = node\n        }\n        domNode.removeChild(node)\n    }\n\n    var length = childNodes.length\n    for (var j = 0; j < moves.inserts.length; j++) {\n        insert = moves.inserts[j]\n        node = keyMap[insert.key]\n        // this is the weirdest bug i've ever seen in webkit\n        domNode.insertBefore(node, insert.to >= length++ ? null : childNodes[insert.to])\n    }\n}\n\nfunction replaceRoot(oldRoot, newRoot) {\n    if (oldRoot && newRoot && oldRoot !== newRoot && oldRoot.parentNode) {\n        oldRoot.parentNode.replaceChild(newRoot, oldRoot)\n    }\n\n    return newRoot;\n}\n","var document = require(\"global/document\")\nvar isArray = require(\"x-is-array\")\n\nvar render = require(\"./create-element\")\nvar domIndex = require(\"./dom-index\")\nvar patchOp = require(\"./patch-op\")\nmodule.exports = patch\n\nfunction patch(rootNode, patches, renderOptions) {\n    renderOptions = renderOptions || {}\n    renderOptions.patch = renderOptions.patch && renderOptions.patch !== patch\n        ? renderOptions.patch\n        : patchRecursive\n    renderOptions.render = renderOptions.render || render\n\n    return renderOptions.patch(rootNode, patches, renderOptions)\n}\n\nfunction patchRecursive(rootNode, patches, renderOptions) {\n    var indices = patchIndices(patches)\n\n    if (indices.length === 0) {\n        return rootNode\n    }\n\n    var index = domIndex(rootNode, patches.a, indices)\n    var ownerDocument = rootNode.ownerDocument\n\n    if (!renderOptions.document && ownerDocument !== document) {\n        renderOptions.document = ownerDocument\n    }\n\n    for (var i = 0; i < indices.length; i++) {\n        var nodeIndex = indices[i]\n        rootNode = applyPatch(rootNode,\n            index[nodeIndex],\n            patches[nodeIndex],\n            renderOptions)\n    }\n\n    return rootNode\n}\n\nfunction applyPatch(rootNode, domNode, patchList, renderOptions) {\n    if (!domNode) {\n        return rootNode\n    }\n\n    var newNode\n\n    if (isArray(patchList)) {\n        for (var i = 0; i < patchList.length; i++) {\n            newNode = patchOp(patchList[i], domNode, renderOptions)\n\n            if (domNode === rootNode) {\n                rootNode = newNode\n            }\n        }\n    } else {\n        newNode = patchOp(patchList, domNode, renderOptions)\n\n        if (domNode === rootNode) {\n            rootNode = newNode\n        }\n    }\n\n    return rootNode\n}\n\nfunction patchIndices(patches) {\n    var indices = []\n\n    for (var key in patches) {\n        if (key !== \"a\") {\n            indices.push(Number(key))\n        }\n    }\n\n    return indices\n}\n","var topLevel = typeof global !== 'undefined' ? global :\n    typeof window !== 'undefined' ? window : {}\nvar minDoc = require('min-document');\n\nvar doccy;\n\nif (typeof document !== 'undefined') {\n    doccy = document;\n} else {\n    doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'];\n\n    if (!doccy) {\n        doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'] = minDoc;\n    }\n}\n\nmodule.exports = doccy;\n","\"use strict\";\n\nmodule.exports = function isObject(x) {\n\treturn typeof x === \"object\" && x !== null;\n};\n","module.exports = \"2\"\n","var createElement = require(\"./vdom/create-element.js\")\n\nmodule.exports = createElement\n","/*!\n * Cross-Browser Split 1.1.1\n * Copyright 2007-2012 Steven Levithan <stevenlevithan.com>\n * Available under the MIT License\n * ECMAScript compliant, uniform cross-browser split method\n */\n\n/**\n * Splits a string into an array of strings using a regex or string separator. Matches of the\n * separator are not included in the result array. However, if `separator` is a regex that contains\n * capturing groups, backreferences are spliced into the result each time `separator` is matched.\n * Fixes browser bugs compared to the native `String.prototype.split` and can be used reliably\n * cross-browser.\n * @param {String} str String to split.\n * @param {RegExp|String} separator Regex or string to use for separating the string.\n * @param {Number} [limit] Maximum number of items to include in the result array.\n * @returns {Array} Array of substrings.\n * @example\n *\n * // Basic use\n * split('a b c d', ' ');\n * // -> ['a', 'b', 'c', 'd']\n *\n * // With limit\n * split('a b c d', ' ', 2);\n * // -> ['a', 'b']\n *\n * // Backreferences in result array\n * split('..word1 word2..', /([a-z]+)(\\d+)/i);\n * // -> ['..', 'word', '1', ' ', 'word', '2', '..']\n */\nmodule.exports = (function split(undef) {\n\n  var nativeSplit = String.prototype.split,\n    compliantExecNpcg = /()??/.exec(\"\")[1] === undef,\n    // NPCG: nonparticipating capturing group\n    self;\n\n  self = function(str, separator, limit) {\n    // If `separator` is not a regex, use `nativeSplit`\n    if (Object.prototype.toString.call(separator) !== \"[object RegExp]\") {\n      return nativeSplit.call(str, separator, limit);\n    }\n    var output = [],\n      flags = (separator.ignoreCase ? \"i\" : \"\") + (separator.multiline ? \"m\" : \"\") + (separator.extended ? \"x\" : \"\") + // Proposed for ES6\n      (separator.sticky ? \"y\" : \"\"),\n      // Firefox 3+\n      lastLastIndex = 0,\n      // Make `global` and avoid `lastIndex` issues by working with a copy\n      separator = new RegExp(separator.source, flags + \"g\"),\n      separator2, match, lastIndex, lastLength;\n    str += \"\"; // Type-convert\n    if (!compliantExecNpcg) {\n      // Doesn't need flags gy, but they don't hurt\n      separator2 = new RegExp(\"^\" + separator.source + \"$(?!\\\\s)\", flags);\n    }\n    /* Values for `limit`, per the spec:\n     * If undefined: 4294967295 // Math.pow(2, 32) - 1\n     * If 0, Infinity, or NaN: 0\n     * If positive number: limit = Math.floor(limit); if (limit > 4294967295) limit -= 4294967296;\n     * If negative number: 4294967296 - Math.floor(Math.abs(limit))\n     * If other: Type-convert, then use the above rules\n     */\n    limit = limit === undef ? -1 >>> 0 : // Math.pow(2, 32) - 1\n    limit >>> 0; // ToUint32(limit)\n    while (match = separator.exec(str)) {\n      // `separator.lastIndex` is not reliable cross-browser\n      lastIndex = match.index + match[0].length;\n      if (lastIndex > lastLastIndex) {\n        output.push(str.slice(lastLastIndex, match.index));\n        // Fix browsers whose `exec` methods don't consistently return `undefined` for\n        // nonparticipating capturing groups\n        if (!compliantExecNpcg && match.length > 1) {\n          match[0].replace(separator2, function() {\n            for (var i = 1; i < arguments.length - 2; i++) {\n              if (arguments[i] === undef) {\n                match[i] = undef;\n              }\n            }\n          });\n        }\n        if (match.length > 1 && match.index < str.length) {\n          Array.prototype.push.apply(output, match.slice(1));\n        }\n        lastLength = match[0].length;\n        lastLastIndex = lastIndex;\n        if (output.length >= limit) {\n          break;\n        }\n      }\n      if (separator.lastIndex === match.index) {\n        separator.lastIndex++; // Avoid an infinite loop\n      }\n    }\n    if (lastLastIndex === str.length) {\n      if (lastLength || !separator.test(\"\")) {\n        output.push(\"\");\n      }\n    } else {\n      output.push(str.slice(lastLastIndex));\n    }\n    return output.length > limit ? output.slice(0, limit) : output;\n  };\n\n  return self;\n})();\n","import create from 'virtual-dom/create-element';\nimport diff from 'virtual-dom/diff';\nimport hyperscript from 'virtual-dom/h';\nimport patch from 'virtual-dom/patch';\n\nexport const h = hyperscript;\n\nexport const mount = (app, selector = 'body') => {\n  document.querySelector(selector).appendChild(app);\n};\n\nexport const program = ({ model = {}, update = {}, view }) => {\n  let root, tree;\n\n  // Update\n  Object.keys(update).forEach(key => {\n    const msg = update[key];\n\n    update[key] = (...payload) => {\n      Object.assign(model, msg(\n        model,\n        update,\n        ...payload\n      ));\n\n      const newTree = view(model, update);\n      const patches = diff(tree, newTree);\n\n      tree = newTree;\n      root = patch(root, patches);\n    };\n  });\n\n  // View\n  tree = view(model, update);\n  root = create(tree);\n\n  return root;\n};\n"],"names":["isHook","hook","hasOwnProperty","unhook","applyProperties","node","props","previous","propName","propValue","undefined","removeProperty","isObject","patchObject","previousValue","attrName","removeAttribute","i","style","getPrototype","replacer","k","value","attrValue","setAttribute","Object","getPrototypeOf","__proto__","constructor","prototype","isVirtualNode","x","type","version","isVirtualText","isWidget","w","isThunk","t","handleThunk","a","b","renderedA","renderedB","renderThunk","thunk","renderedThunk","vnode","render","isVNode","isVText","Error","createElement","opts","doc","document","warn","init","createTextNode","text","namespace","tagName","createElementNS","properties","children","length","childNode","appendChild","isArray","obj","toString","call","VirtualPatch","vNode","patch","this","Number","diffProps","diff","aKey","aValue","bValue","objectDiff","bKey","walk","index","apply","applyClear","thunks","clearState","appendPatch","VPatch","REMOVE","key","propsPatch","PROPS","diffChildren","VNODE","VTEXT","WIDGET","aChildren","orderedSet","reorder","bChildren","aLen","bLen","len","leftNode","rightNode","INSERT","count","moves","ORDER","destroyWidgets","destroy","hasWidgets","hasThunks","child","nodes","thunkPatch","hasPatches","THUNK","hooks","undefinedKeys","descendantHooks","result","bChildIndex","keyIndex","bKeys","keys","bFree","free","aChildIndex","aKeys","newChildren","freeIndex","freeCount","deletedItems","itemIndex","aItem","push","lastFreeIndex","j","newItem","simulateItem","simulate","slice","simulateIndex","removes","inserts","wantedItem","remove","to","arr","splice","from","VirtualNode","noProperties","noChildren","String","descendants","property","isVHook","VirtualText","parseTag","tag","noId","tagParts","split","classIdSplit","notClassId","test","classes","part","charAt","substring","id","className","join","toUpperCase","SoftSetHook","Individual","root","OneVersion","moduleName","defaultValue","versionValue","EvStore","elem","hash","hashKey","EvHook","h","childNodes","isChildren","softSetHook","transformProperties","addChild","VNode","c","VText","isChild","UnexpectedVirtualElement","foreignObject","parentVnode","substr","evHook","isVThunk","data","err","message","errorString","JSON","stringify","e","domIndex","rootNode","tree","indices","sort","ascending","recurse","rootIndex","indexInRange","vChildren","vChild","noChild","nextIndex","left","right","currentIndex","currentItem","minIndex","maxIndex","updateWidget","applyPatch","vpatch","domNode","renderOptions","removeNode","insertNode","stringPatch","widgetPatch","vNodePatch","reorderChildren","replaceRoot","parentNode","removeChild","destroyWidget","newNode","leftVNode","vText","nodeType","replaceData","replaceChild","widget","updating","update","insert","keyMap","insertBefore","oldRoot","newRoot","patches","patchRecursive","patchIndices","ownerDocument","nodeIndex","patchList","patchOp","doccy","topLevel","global","window","minDoc","nativeIsArray","Array","NONE","undef","nativeSplit","compliantExecNpcg","exec","str","separator","limit","separator2","match","lastIndex","lastLength","output","flags","ignoreCase","multiline","extended","sticky","lastLastIndex","RegExp","source","replace","arguments","propertyName","mount","app","selector","querySelector","program","ref","view","forEach","const","msg","assign","model","payload","newTree","create"],"mappings":"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"}