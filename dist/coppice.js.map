{"version":3,"file":"coppice.js","sources":["../node_modules/just-curry-it/index.js","../node_modules/just-extend/index.js","../node_modules/picodom/index.js","../src/index.js"],"sourcesContent":["module.exports = curry;\n\n/*\n  function converter(ratio, input) {\n    return (input*ratio).toFixed(1);\n  }\n  var curriedConverter = curry(converter)\n  var milesToKm = curriedConverter(1.62);\n  milesToKm(35); // 56.7\n  milesToKm(10); // 16.2\n*/\n\nfunction curry(fn) {\n  return function curried() {\n    var args = [].slice.call(arguments);\n    if (args.length >= fn.length) {\n      return fn.apply(this, args);\n    } else {\n      return function () {\n        return curried.apply(this, args.concat([].slice.call(arguments)));\n      };\n    }\n  };\n}\n","module.exports = extend;\n\n/*\n  var obj = {a: 3, b: 5};\n  extend(obj, {a: 4, c: 8}); // {a: 4, b: 5, c: 8}\n  obj; // {a: 4, b: 5, c: 8}\n\n  var obj = {a: 3, b: 5};\n  extend({}, obj, {a: 4, c: 8}); // {a: 4, b: 5, c: 8}\n  obj; // {a: 3, b: 5}\n\n  var arr = [1, 2, 3];\n  var obj = {a: 3, b: 5};\n  extend(obj, {c: arr}); // {a: 3, b: 5, c: [1, 2, 3]}\n  arr.push[4];\n  obj; // {a: 3, b: 5, c: [1, 2, 3, 4]}\n\n  var arr = [1, 2, 3];\n  var obj = {a: 3, b: 5};\n  extend(true, obj, {c: arr}); // {a: 3, b: 5, c: [1, 2, 3]}\n  arr.push[4];\n  obj; // {a: 3, b: 5, c: [1, 2, 3]}\n*/\n\nfunction extend(obj1, obj2 /*, [objn]*/) {\n  var args = [].slice.call(arguments);\n  var deep = false;\n  if (typeof args[0] === 'boolean') {\n    deep = args.shift();\n  }\n  var result = args[0];\n  var extenders = args.slice(1);\n  var len = extenders.length;\n  for (var i = 0; i < len; i++) {\n    var extender = extenders[i];\n    for (var key in extender) {\n      // include prototype properties\n      var value = extender[key];\n      if (deep && value && (typeof value == 'object')) {\n        var base = Array.isArray(value) ? [] : {};\n        result[key] = extend(true, result[key] || base, value);\n      } else {\n        result[key] = value;\n      }\n    }\n  }\n  return result;\n}\n","export { h, patch }\n\nfunction h(tag, data) {\n  var node\n  var stack = []\n  var children = []\n\n  for (var i = arguments.length; i-- > 2; ) {\n    stack[stack.length] = arguments[i]\n  }\n\n  while (stack.length) {\n    if (Array.isArray((node = stack.pop()))) {\n      for (var i = node.length; i--; ) {\n        stack[stack.length] = node[i]\n      }\n    } else if (node != null && node !== true && node !== false) {\n      if (typeof node === \"number\") {\n        node = node + \"\"\n      }\n      children[children.length] = node\n    }\n  }\n\n  return typeof tag === \"string\"\n    ? {\n        tag: tag,\n        data: data || {},\n        children: children\n      }\n    : tag(data, children)\n}\n\nfunction patch(parent, element, oldNode, node) {\n  if (oldNode == null) {\n    element = parent.insertBefore(createElementFrom(node), element)\n  } else if (node.tag && node.tag === oldNode.tag) {\n    updateElementData(element, oldNode.data, node.data)\n\n    var len = node.children.length\n    var oldLen = oldNode.children.length\n    var reusableChildren = {}\n    var oldElements = []\n    var newKeys = {}\n\n    for (var i = 0; i < oldLen; i++) {\n      var oldElement = element.childNodes[i]\n      oldElements[i] = oldElement\n\n      var oldChild = oldNode.children[i]\n      var oldKey = getKeyFrom(oldChild)\n\n      if (null != oldKey) {\n        reusableChildren[oldKey] = [oldElement, oldChild]\n      }\n    }\n\n    var i = 0\n    var j = 0\n\n    while (j < len) {\n      var oldElement = oldElements[i]\n      var oldChild = oldNode.children[i]\n      var newChild = node.children[j]\n\n      var oldKey = getKeyFrom(oldChild)\n      if (newKeys[oldKey]) {\n        i++\n        continue\n      }\n\n      var newKey = getKeyFrom(newChild)\n\n      var reusableChild = reusableChildren[newKey] || []\n\n      if (null == newKey) {\n        if (null == oldKey) {\n          patch(element, oldElement, oldChild, newChild)\n          j++\n        }\n        i++\n      } else {\n        if (oldKey === newKey) {\n          patch(element, reusableChild[0], reusableChild[1], newChild)\n          i++\n        } else if (reusableChild[0]) {\n          element.insertBefore(reusableChild[0], oldElement)\n          patch(element, reusableChild[0], reusableChild[1], newChild)\n        } else {\n          patch(element, oldElement, null, newChild)\n        }\n\n        j++\n        newKeys[newKey] = newChild\n      }\n    }\n\n    while (i < oldLen) {\n      var oldChild = oldNode.children[i]\n      var oldKey = getKeyFrom(oldChild)\n      if (null == oldKey) {\n        removeElement(element, oldElements[i], oldChild)\n      }\n      i++\n    }\n\n    for (var i in reusableChildren) {\n      var reusableChild = reusableChildren[i]\n      var reusableNode = reusableChild[1]\n      if (!newKeys[reusableNode.data.key]) {\n        removeElement(element, reusableChild[0], reusableNode)\n      }\n    }\n  } else if (node !== oldNode) {\n    var i = element\n    parent.replaceChild((element = createElementFrom(node)), i)\n  }\n\n  return element\n}\n\nfunction merge(a, b) {\n  var obj = {}\n\n  if (typeof b !== \"object\" || Array.isArray(b)) {\n    return b\n  }\n\n  for (var i in a) {\n    obj[i] = a[i]\n  }\n  for (var i in b) {\n    obj[i] = b[i]\n  }\n\n  return obj\n}\n\nfunction createElementFrom(node, isSVG) {\n  if (typeof node === \"string\") {\n    var element = document.createTextNode(node)\n  } else {\n    var element = (isSVG = isSVG || node.tag === \"svg\")\n      ? document.createElementNS(\"http://www.w3.org/2000/svg\", node.tag)\n      : document.createElement(node.tag)\n\n    for (var i = 0; i < node.children.length; ) {\n      element.appendChild(createElementFrom(node.children[i++], isSVG))\n    }\n\n    for (var i in node.data) {\n      if (i === \"oncreate\") {\n        node.data[i](element)\n      } else {\n        setElementData(element, i, node.data[i])\n      }\n    }\n  }\n\n  return element\n}\n\nfunction setElementData(element, name, value, oldValue) {\n  if (name === \"key\") {\n  } else if (name === \"style\") {\n    for (var i in merge(oldValue, (value = value || {}))) {\n      element.style[i] = value[i] || \"\"\n    }\n  } else {\n    try {\n      element[name] = value\n    } catch (_) {}\n\n    if (typeof value !== \"function\") {\n      if (value) {\n        element.setAttribute(name, value)\n      } else {\n        element.removeAttribute(name)\n      }\n    }\n  }\n}\n\nfunction updateElementData(element, oldData, data) {\n  for (var name in merge(oldData, data)) {\n    var value = data[name]\n    var oldValue = oldData[name]\n\n    if (name === \"onupdate\") {\n      value(element)\n    } else if (value !== oldValue || value !== element[name]) {\n      setElementData(element, name, value, oldValue)\n    }\n  }\n}\n\nfunction getKeyFrom(node) {\n  if (node && (node = node.data)) {\n    return node.key\n  }\n}\n\nfunction removeElement(parent, element, node) {\n  ;((node.data && node.data.onremove) || removeChild)(element, removeChild)\n  function removeChild() {\n    parent.removeChild(element)\n  }\n}\n","import curry from 'just-curry-it';\nimport extend from 'just-extend';\nimport { patch, h as hyperscript } from 'picodom';\n\nexport const h = hyperscript;\n\nexport const mount = (app, selector = 'body') => {\n  document.querySelector(selector).appendChild(app);\n};\n\nexport const program = ({ model = {}, update = {}, action = {}, view }) => {\n  let element, oldNode;\n  let root = document.createElement(null);\n\n  const render = newNode => (\n    element = patch(\n      root,\n      element,\n      oldNode,\n      (oldNode = newNode)\n    )\n  );\n\n  const commit = curry((type, payload) => {\n    const fn = update[type];\n\n    extend(model, fn(payload)(model));\n\n    render(view({ commit, dispatch })(model));\n  });\n\n  const dispatch = curry((type, payload) => {\n    const fn = action[type];\n\n    fn({ commit, dispatch }, payload);\n  });\n\n  return render(view({ commit, dispatch })(model));\n};\n"],"names":["curry","fn","curried","args","slice","call","arguments","length","apply","this","concat","extend","obj1","obj2","deep","shift","result","extenders","len","i","extender","key","value","base","Array","isArray","h","tag","data","node","stack","children","pop","patch","parent","element","oldNode","insertBefore","createElementFrom","updateElementData","oldLen","reusableChildren","oldElements","newKeys","oldElement","childNodes","oldKey","getKeyFrom","oldChild","j","newChild","newKey","reusableChild","removeElement","reusableNode","replaceChild","merge","a","b","obj","isSVG","document","createTextNode","createElementNS","createElement","appendChild","setElementData","name","oldValue","style","_","setAttribute","removeAttribute","oldData","removeChild","onremove","hyperscript","mount","app","selector","querySelector","program","ref","view","root","render","newNode","commit","type","payload","const","update","model","dispatch","action"],"mappings":"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"}